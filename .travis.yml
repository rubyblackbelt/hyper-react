language: ruby
rvm:
  - ruby
env:
  - HYPER_DEV_GEM_SOURCE="https://gems.ruby-hyperloop.org" TZ=Europe/Berlin DRIVER=travis
  - HYPER_DEV_GEM_SOURCE="https://gems.ruby-hyperloop.org" TZ=Europe/Berlin DRIVER=beheaded
before_install:
  - sudo apt-get install -y fonts-liberation gconf-service libappindicator1 libasound2
  - sudo apt-get install -y libatk-bridge2.0-0 libatk1.0-0 libcairo2 libcups2 libfontconfig1
  - sudo apt-get install -y libnspr4 libnss3 libx11-xcb1 libxss1 xdg-utils
  - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
  - sudo dpkg -i google-chrome*.deb
  - gem install bundler
before_script:
  - cd spec/test_app
  - bundle update
  - bundle exec rails db:setup
  - cd ../../
  - chromedriver-update
  - ls -lR ~/.chromedriver-helper/
  - which firefox
  - which geckodriver
  - firefox --version
  - geckodriver --version
  - chromedriver --version
  - chrome --version
  - which chromedriver
  - which chrome
script: bundle exec rspec
gemfile:
  - gemfiles/opal_0_11_react-rails_2_4.gemfile
